{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Drive | Drive World</title>
    <link href="{% static 'css/foldermaster.css' %}" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="background-gray">
    <div class="flex-container">
        <!-- Barra de navegação -->
        <nav class="navbar">
            <ul class="navbar-list">
                <li>
                    {% if folder %}
                        <a href="{% url 'foldermaster:create_subfolder' folder.id %}" id="showNewFolderForm" class="navbar-link">New Folder</a>
                    {% else %}
                        <a href="{% url 'foldermaster:create_folder_root' %}" id="showNewFolderForm" class="navbar-link">New Folder</a>
                    {% endif %}
                </li>
                <li><a href="{% url 'foldermaster:foldermanagement' %}" class="navbar-link">My Drive</a></li>
                <li>
                    {% if folder %}
                        <a href="{% url 'foldermaster:upload_file_with_folder' folder.id %}" class="navbar-link">New File</a>
                    {% else %}
                        <a href="{% url 'foldermaster:upload_file_root' %}" class="navbar-link">New File (Root)</a>
                    {% endif %}
                </li>
                <li>
                    {% if folder %}
                        <a href="{% url 'foldermaster:upload_folder_with_parent' folder.id %}" class="navbar-link">Upload Folder</a>
                    {% else %}
                        <a href="{% url 'foldermaster:upload_folder' %}" class="navbar-link">Upload Folder (Root)</a>
                    {% endif %}
                </li>
                <li>
                    {% if folder %}
                        <a href="{% url 'foldermaster:delete_folder' folder.id %}" class="navbar-link" onclick="return confirm('Tem certeza que deseja excluir esta pasta?')">Delete Folder</a>
                    {% endif %}
                </li>
                <li><a href="#" class="navbar-link">Trash</a></li>
                <li><a href="#" class="navbar-link">Storage ({{ storage_available|filesizeformat }} available)</a></li>
            </ul>
        </nav>
    
        <!-- Conteúdo principal -->
        <div class="main-content">
            <!-- Caminho da pasta atual -->
            <div class="breadcrumbs">
                {% if folder %}
                    <p>Current Path:</p>
                    <ul class="breadcrumb-list">
                        <li><a href="{% url 'foldermaster:foldermanagement' %}">My Drive</a></li>
                        {% for name, id in breadcrumbs %}
                            <li class="separator">/</li>
                            <li><a href="{% url 'foldermaster:foldermanagement_with_folder' folder_id=id %}">{{ name }}</a></li>
                        {% endfor %}
                        <li class="separator">/</li>
                        <li>{{ folder.name }}</li>
                    </ul>
                {% endif %}
            </div>
    
            <!-- Lista de pastas principais -->
            <div class="root-folders-section">
                <h2 class="section-title">Root Folders</h2>
                <ul class="folder-list">
                    {% for folder in folders %}
                        <li class="folder-item">
                            <a href="{% url 'foldermaster:foldermanagement_with_folder' folder_id=folder.id %}" class="folder-link">{{ folder.name }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
    
            <!-- Lista de subpastas (dentro da pasta pai) -->
            {% if folder %}
            <div class="subfolders-section">
                <h2 class="section-title">Subfolders of {{ folder.name }}</h2>
                <ul class="folder-list">
                    {% for subfolder in subfolders %}
                        <li class="folder-item">
                            <a href="{% url 'foldermaster:foldermanagement_with_folder' folder_id=subfolder.id %}" class="folder-link">{{ subfolder.name }}</a>
                        </li>
                    {% empty %}
                        <li>No subfolders found.</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
    
            <!-- Lista de arquivos -->
            <div class="root-files-section">
                <h2 class="section-title">Root Files</h2>
                <ul class="file-list">
                    {% for file in files %}
                        <li class="file-item">
                            {{ file.name }} -
                            <a href="{% url 'foldermaster:download_file' file_id=file.id %}" class="file-link">Download</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div> <!-- /.main-content -->
    </div> <!-- /.flex-container -->
{% endblock %}
