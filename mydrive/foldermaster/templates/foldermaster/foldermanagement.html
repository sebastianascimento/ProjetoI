{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="{% static 'css/foldermaster.css' %}" rel="stylesheet">
    <title>Your Drive | Drive World</title>
</head>
<body class="background-gray">
<div class="flex-container">
    <!-- Barra de navegação -->
    <nav class="navbar">
        <ul class="navbar-list">
            <li><a href="{% url 'foldermaster:foldermanagement' %}" class="navbar-brand">Drive World</a></li>
            <li><a href="#" id="showNewFolderForm" class="navbar-link">New Folder</a></li>
            <li><a href="{% url 'foldermaster:foldermanagement' %}" class="navbar-link">My Drive</a></li>
            <li><a href="#" class="navbar-link">Recent</a></li>
            <li><a href="#" class="navbar-link">Trash</a></li>
            <li><a href="#" class="navbar-link">Storage ({{ storage_available|filesizeformat }} available)</a></li>
        </ul>
    </nav>

    <!-- Conteúdo principal -->
    <div class="main-content">
        <!-- Caminho da pasta atual -->
        <div class="breadcrumbs">
            {% if folder %}
                <p>Current Path:</p>
                <ul class="breadcrumb-list">
                    <li><a href="{% url 'foldermaster:foldermanagement' %}">My Drive</a></li>
                    {% for name, url in breadcrumbs %}
                        <li class="separator">/</li>
                        <li><a href="{% url 'foldermaster:foldermanagement' folder_id=url %}">{{ name }}</a></li>
                    {% endfor %}
                    <li class="separator">/</li>
                    <li>{{ folder.name }}</li>
                </ul>
            {% endif %}
        </div>
        
        <!-- Formulário para criar nova pasta -->
        <div class="new-folder-section">
            <form id="newFolderForm" method="post">
                {% csrf_token %}
                <div class="form-group">
                    {{ folder_form.name.label_tag }}
                    {{ folder_form.name }}
                </div>
                <input type="hidden" id="parent_folder_id" name="parent_folder_id" value="{% if folder %}{{ folder.id }}{% endif %}" />
                <button type="submit" class="submit-button" name="create_folder">Create Folder</button>
                {% if error %}
                    <p class="error-message">{{ error }}</p>
                {% endif %}
            </form>
        </div>


        <!-- Lista de pastas principais -->
        <div class="root-folders-section">
            <h2 class="section-title">Root Folders</h2>
            <ul class="folder-list">
                {% for folder in folders %}
                    <li class="folder-item">
                        <a href="{% url 'foldermaster:foldermanagement' folder_id=folder.id %}" class="folder-link">{{ folder.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Lista de subpastas (dentro da pasta pai) -->
        {% if folder %}
        <div class="subfolders-section">
            <h2 class="section-title">Subfolders of {{ folder.name }}</h2>
            <ul class="folder-list">
                {% for subfolder in subfolders %}
                    <li class="folder-item">
                        <a href="{% url 'foldermaster:foldermanagement' folder_id=subfolder.id %}" class="folder-link">{{ subfolder.name }}</a>
                    </li>
                {% empty %}
                    <li>No subfolders found.</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Lista de arquivos -->
        <div class="root-files-section">
            <h2 class="section-title">Root Files</h2>
            <ul class="file-list">
                {% for file in files %}
                    <li class="file-item">
                        {{ file.name }} -
                        <a href="{% url 'foldermaster:download_file' file_id=file.id %}" class="file-link">Download</a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Outras seções (Recent Files, Trash, Storage) -->
        <div class="other-sections">
            <h2 class="section-title">Recent Files</h2>
            <!-- Conteúdo para arquivos recentes -->

            <h2 class="section-title">Trash</h2>
            <!-- Conteúdo para lixeira -->

            <h2 class="section-title">Storage</h2>
            <!-- Conteúdo para armazenamento -->
        </div>
    </div>
</div>


    
    
    
</body>
</html>
{% endblock %}
